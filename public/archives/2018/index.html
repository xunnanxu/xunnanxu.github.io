
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Shawn&#39;s Pitstop">
    <title>Archives: 2018 - Shawn&#39;s Pitstop</title>
    <meta name="author" content="Shawn Xu">
    
    
        <link rel="icon" href="http://xcorpion.tech/assets/images/favicon.jpg">
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/rss2.xml">
    
    <meta property="og:type" content="blog">
<meta property="og:title" content="Shawn&#39;s Pitstop">
<meta property="og:url" content="http://xcorpion.tech/archives/2018/index.html">
<meta property="og:site_name" content="Shawn&#39;s Pitstop">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Shawn&#39;s Pitstop">
    
    
        
    
    
        <meta property="og:image" content="https://miro.medium.com/fit/c/90/90/1*7cPXDgvy2_tKMHR4SEd-yQ.jpeg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-3pbw1w9ol2rtjknrotqf7n88hgtplinyhr0aejlqsv6eai8jaacmtr3frgfd.min.css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-83953865-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">Shawn&#39;s Pitstop</a>
    </div>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="https://miro.medium.com/fit/c/90/90/1*7cPXDgvy2_tKMHR4SEd-yQ.jpeg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="https://miro.medium.com/fit/c/90/90/1*7cPXDgvy2_tKMHR4SEd-yQ.jpeg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">Shawn Xu</h4>
                
                    <h5 class="sidebar-profile-bio"><p>Full-stack Software Engineer in Bay Area</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories/"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags/"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives/"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/xunnanxu" target="_blank">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://www.linkedin.com/in/xunnanxu" target="_blank">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/rss2.xml"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten " itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2018/05/13/Building-Linux-Workspace-on-Windows-10-via-WSL/">
                            Building Linux Workspace on Windows 10 via WSL
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2018-05-13T15:35:46-07:00">
	
		    May 13, 2018
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <img src="/2018/05/13/Building-Linux-Workspace-on-Windows-10-via-WSL/title.png">
<p>I was not really a fan of Windows 10,
let alone Microsoft decided to ditch the most important feature I liked in Windows 7 - Aero.
In fact, I’d admit that in most cases I use Windows as an entertainment system
rather than a working platform.</p>
<p>Don’t get me wrong, Windows is great, both in terms of the quality of the software
and the design/usability of the system by itself. It’s also particularly great of you are
a .NET developer, a webmaster using IIS, or a game developer heavily using DirectX.
However, it’s just cumbersome to use it as a daily OSS platform, namely there lacks the
general ecosystem and the tools are just different. Yes you can install node, java, maven,
gradle, and you can probably use powershell to write shell scripts, but at the end of the day,
the overall configuration just feels different and since most people don’t use Windows
for work on a day-to-day basis, it just takes too much time and effort to learn a set of
rules with different flavor, just to get the environment set up.</p>
<p>However, things have changed.</p>
<p>The release of WSL (Windows Subsystem on Linux) in Windows 10 was like silent bomb.
It wasn’t really marketed to general public, but it implies the fundamental
change of attitude from Microsoft towards OSS community.</p>
<p>WSL is not a virtual machine. In fact there’s no real linux kernel running.
Instead, there is a layer in between that translates linux system calls to
something that windows kernel can handle. Technically, this is seriously phenomenal,
as there’s certain things that there’s no direct equivalent in Windows.</p>
<p>For example:</p>
<p>Quoted from <a href="https://blogs.msdn.microsoft.com/wsl/2016/06/08/wsl-system-calls/" target="_blank" rel="noopener">MSDN blog</a></p>
<blockquote>
<p>The Linux fork syscall has no documented equivalent for Windows.
When a fork syscall is made on WSL, lxss.sys does some of the initial work
to prepare for copying the process.
It then calls internal NT APIs to create the process with the correct semantics
and create a thread in the process with an identical register context.
Finally, it does some additional work to complete copying the process
and resumes the new process so it can begin executing.</p>
</blockquote>
<p>And another one regarding <a href="https://blogs.msdn.microsoft.com/wsl/2016/06/15/wsl-file-system-support/" target="_blank" rel="noopener">WSL file system</a>:</p>
<blockquote>
<p>The Windows Subsystem for Linux must translate various Linux file system operations
into NT kernel operations. WSL must provide a place where Linux system files can exist
with all the functionality required for that including Linux permissions,
symbolic links and other special files such as FIFOs;
it must provide access to the Windows volumes on your system;
and it must provide special file systems such as ProcFs.</p>
</blockquote>
<p>And now it even supports <a href="https://docs.microsoft.com/en-us/windows/wsl/interop" target="_blank" rel="noopener">interop</a>
after the Fall Creators update. This means if you type in <code>notepad.exe</code>,
it would literally open notepad for you. Not very exciting but beyond that you could
do</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> copy stuff to clipboard</span><br><span class="line">echo 'foo bar' | clip.exe</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> open a file in windows using default associated program</span><br><span class="line">cmd.exe /C start image.png</span><br></pre></td></tr></table></figure>
<p><strong>Awesome, but what’s our original topic?</strong></p>
<h2 id="Enable-WSL"><a href="#Enable-WSL" class="headerlink" title="Enable WSL"></a>Enable WSL</h2><p>Ok, to use WSL, you’d need to enable it first.</p>
<p><em>// Make sure you are using Windows 10 :)</em></p>
<p>If you are running windows <strong>earlier than 1709</strong>, the setup would be like this:</p>
<ol>
<li>Press Windows key. Type in “Turn windows features on or off” and click on the option that shows up.</li>
<li><p>Turn on WSL</p>
 <img src="/2018/05/13/Building-Linux-Workspace-on-Windows-10-via-WSL/WSL.png">
</li>
<li><p>Reboot system. You will now have “Bash on Ubuntu on Windows” in your Start Menu.</p>
</li>
</ol>
<p>If you are running version <strong>&gt;= 1709</strong>, just search for “Ubuntu”
or other available distributions like “Debian” or “OpenSUSE” in Microsoft Store.</p>
<h2 id="Throw-Away-Cmd"><a href="#Throw-Away-Cmd" class="headerlink" title="Throw Away Cmd"></a>Throw Away Cmd</h2><p>The long lived cmd.exe in windows is not something people would generally like.</p>
<p>If you want to have something close to iTerm2 on Mac or Yakuake on KDE,
you can try <a href="https://conemu.github.io/" target="_blank" rel="noopener">ConEmu</a> (see title image).</p>
<p>ConEmu allows for creating tabs (Win + Shift + W),
and splitting windows (Ctrl + Shift + O/E). Alternatively you can use tmux.</p>
<p>I personally enable the Quake style which allows me to hit <code>Ctrl + ~</code> to bring it down.</p>
<p>ConEmu does not seem to have start up with Windows option but you can get around that
by putting the shortcut into Startup folder in Start Menu and set the initial window
option to be “Minimized”.</p>
<h2 id="Basic-Setup"><a href="#Basic-Setup" class="headerlink" title="Basic Setup"></a>Basic Setup</h2><h3 id="Upgrade-Packages"><a href="#Upgrade-Packages" class="headerlink" title="Upgrade Packages"></a>Upgrade Packages</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo apt -y update</span><br><span class="line"><span class="meta">$</span> sudo apt -y upgrade</span><br><span class="line"><span class="meta">$</span> sudo apt -y dist-upgrade</span><br><span class="line"><span class="meta">$</span> sudo apt -y autoremove</span><br></pre></td></tr></table></figure>
<h3 id="Change-to-Favorite-Shell"><a href="#Change-to-Favorite-Shell" class="headerlink" title="Change to Favorite Shell"></a>Change to Favorite Shell</h3><p>By default most distributions would use bash.</p>
<p>If you want to use zsh or other shell:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo chsh --shell /bin/zsh &lt;username&gt;</span><br></pre></td></tr></table></figure>
<p>or if you want to install oh-my-zsh:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sh -c "$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"</span><br></pre></td></tr></table></figure>
<h3 id="Mount-Network-Drives"><a href="#Mount-Network-Drives" class="headerlink" title="Mount Network Drives"></a>Mount Network Drives</h3><p>Ubuntu on windows should have mounted all local disks for you under <code>/mnt</code>.
In case you need to mount a network drive like NAS:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo mount -t drvfs Z: /mnt/z</span><br></pre></td></tr></table></figure>
<h2 id="Some-Advanced-Tweaks-You-Might-Want"><a href="#Some-Advanced-Tweaks-You-Might-Want" class="headerlink" title="Some Advanced Tweaks You Might Want"></a>Some Advanced Tweaks You Might Want</h2><h3 id="Disabling-bell"><a href="#Disabling-bell" class="headerlink" title="Disabling bell"></a>Disabling bell</h3><p>By default you’ll hear an annoying “dang” every time you tab complete.
That is associated with the “Critical Stop” sound config in windows.
To stop it is shell specific but generally:</p>
<p>For bash, put this into <code>.bashrc</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> bell-style none</span><br></pre></td></tr></table></figure>
<p>For zsh, this works for me in <code>.zshrc</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unsetopt</span> beep</span><br></pre></td></tr></table></figure>
<h3 id="Stop-Windows-From-Sharing-PATH"><a href="#Stop-Windows-From-Sharing-PATH" class="headerlink" title="Stop Windows From Sharing PATH"></a>Stop Windows From Sharing PATH</h3><p>By default Windows would copy PATH variables to WSL. This could be quite annoying
if you use tools like pyenv, rvm or nvm and you also have python, ruby, or node installed
in Windows as typically the stuff from Windows will take priority.</p>
<p>To fix that you can create a DWORD <code>AppendNtPath</code> under
<code>HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Lxss</code> and set the value to <code>0</code>.</p>
<h3 id="Allow-Linux-to-Open-File-Using-Preferred-Application-in-Windows"><a href="#Allow-Linux-to-Open-File-Using-Preferred-Application-in-Windows" class="headerlink" title="Allow Linux to Open File Using Preferred Application in Windows"></a>Allow Linux to Open File Using Preferred Application in Windows</h3><p>This is quite useful if you just want to say check an image as WSL is not shipped with a desktop.
By default the <code>xdg-open</code> binary can be used in linux but WSL is not shipped with that either.</p>
<p>Luckily as WSL supports interop, there’s a trick:</p>
<ol>
<li><p>Create a file <code>/usr/bin/xdg-open</code> with content</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env sh</span></span><br><span class="line">cmd.exe /C start <span class="string">"<span class="variable">$1</span>"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Make it executable:</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo chmod +x /usr/bin/xdg-open</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Use it:</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> xdg-open a.png</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Call-VSCode-from-Linux"><a href="#Call-VSCode-from-Linux" class="headerlink" title="Call VSCode from Linux"></a>Call VSCode from Linux</h3><p>You can technically get everything done with vi, but sometimes it’s easier to just use a GUI.</p>
<p>For VSCode Mac version there’s an option to install it to terminal, but it just doesn’t exist in Windows.</p>
<p>But with WSL interop, just put this in shell rc file:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> code /mnt/c/Program\ Files/Microsoft\ VS\ Code/Code.exe</span><br></pre></td></tr></table></figure>
<p>To use it:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> code path/to/my/file</span></span><br></pre></td></tr></table></figure>
<h3 id="Install-Python-Node-Ruby"><a href="#Install-Python-Node-Ruby" class="headerlink" title="Install Python/Node/Ruby"></a>Install Python/Node/Ruby</h3><p>I use pyenv and it’s the same as if you are in normal linux:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | zsh</span></span><br><span class="line">pyenv install 3.6.5</span><br><span class="line">pyenv shell 3.6.5</span><br></pre></td></tr></table></figure>
<p>Similar solution can be used for node and ruby using nvm and rvm respectively.</p>

                    
                        
                    
                    
                        <p>
                            <a href="/2018/05/13/Building-Linux-Workspace-on-Windows-10-via-WSL/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten " itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2018/04/13/Workflow-Processing-Engine-Overview-2018-Airflow-vs-Azkaban-vs-Conductor-vs-Oozie-vs-Amazon-Step-Functions/">
                            Workflow Processing Engine Overview 2018: Airflow vs Azkaban vs Conductor vs Oozie vs Amazon Step Functions
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2018-04-13T21:33:33-07:00">
	
		    Apr 13, 2018
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <table>
<thead>
<tr>
<th style="text-align:center"></th>
<th>Airflow</th>
<th>Azkaban</th>
<th>Conductor</th>
<th>Oozie</th>
<th>Step Functions</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>Owner</strong></td>
<td>Apache<br>(previously Airbnb)</td>
<td>LinkedIn</td>
<td>Netflix</td>
<td>Apache</td>
<td>Amazon</td>
</tr>
<tr>
<td style="text-align:center"><strong>Community</strong></td>
<td>Very Active</td>
<td>Somewhat active</td>
<td>Active</td>
<td>Active</td>
<td>N/A</td>
</tr>
<tr>
<td style="text-align:center"><strong>History</strong></td>
<td>4 years</td>
<td>7 years</td>
<td>1.5 years</td>
<td>8 years</td>
<td>1.5 years</td>
</tr>
<tr>
<td style="text-align:center"><strong>Main Purpose</strong></td>
<td>General Purpose Batch Processing</td>
<td>Hadoop Job Scheduling</td>
<td>Microservice orchestration</td>
<td>Hadoop Job Scheduling</td>
<td>General Purpose Workflow Processing</td>
</tr>
<tr>
<td style="text-align:center"><strong>Flow Definition</strong></td>
<td>Python</td>
<td>Custom DSL</td>
<td>JSON</td>
<td>XML</td>
<td>JSON</td>
</tr>
<tr>
<td style="text-align:center"><strong>Support for single node</strong></td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr>
<td style="text-align:center"><strong>Quick demo setup</strong></td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>N/A</td>
</tr>
<tr>
<td style="text-align:center"><strong>Support for HA</strong></td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td style="text-align:center"><strong>Single Point of Failure</strong></td>
<td>Yes<br>(Single scheduler)</td>
<td>Yes<br>(Single web and scheduler combined node)</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td style="text-align:center"><strong>HA Extra Requirement</strong></td>
<td>Celery/Dask/Mesos + Load Balancer + DB</td>
<td>DB</td>
<td>Load Balancer (web nodes) + DB</td>
<td>Load Balancer (web nodes) + DB + Zookeeper</td>
<td>Native</td>
</tr>
<tr>
<td style="text-align:center"><strong>Cron Job</strong></td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td style="text-align:center"><strong>Execution Model</strong></td>
<td>Push</td>
<td>Push</td>
<td>Poll</td>
<td>Poll</td>
<td>Unknown</td>
</tr>
<tr>
<td style="text-align:center"><strong>Rest API Trigger</strong></td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td style="text-align:center"><strong>Parameterized Execution</strong></td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td style="text-align:center"><strong>Trigger by External Event</strong></td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td style="text-align:center"><strong>Native Waiting Task Support</strong></td>
<td>Yes</td>
<td>No</td>
<td>Yes (external signal required)</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td style="text-align:center"><strong>Backfilling support</strong></td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td style="text-align:center"><strong>Native Web Authentication</strong></td>
<td>LDAP/Password</td>
<td>XML Password</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td style="text-align:center"><strong>Monitoring</strong></td>
<td>Yes</td>
<td>Limited</td>
<td>Limited</td>
<td>Yes</td>
<td>Limited</td>
</tr>
<tr>
<td style="text-align:center"><strong>Scalability</strong></td>
<td>Depending on executor setup</td>
<td>Good</td>
<td>Very Good</td>
<td>Very Good</td>
<td>Very Good</td>
</tr>
</tbody>
</table>
<h2 id="Disclaimer"><a href="#Disclaimer" class="headerlink" title="Disclaimer"></a>Disclaimer</h2><p>I’m not an expert in any of those engines.
I’ve used some of those (Airflow &amp; Azkaban) and checked the code.
For some others I either only read the code (Conductor) or the docs (Oozie/AWS Step Functions).
As most of them are OSS projects, it’s certainly possible that I might have missed certain undocumented features,
or community-contributed plugins. I’m happy to update this if you see anything wrong.</p>
<p>Bottom line: Use your own judgement when reading this post.</p>
<h2 id="Airflow"><a href="#Airflow" class="headerlink" title="Airflow"></a>Airflow</h2><h3 id="The-Good"><a href="#The-Good" class="headerlink" title="The Good"></a>The Good</h3><p>Airflow is a super feature rich engine compared to all other solutions.
Not only you can use plugins to support all kinds of jobs,
ranging from data processing jobs: Hive, Pig (though you can also submit them via shell command),
to general flow management like triggering by existence of file/db entry/s3 content,
or waiting for expected output from a web endpoint,
but also it provides a nice UI that allows you to check your DAGs (workflow dependencies) through code/graph,
and monitors the real time execution of jobs.</p>
<p>Airflow is also highly customizable with a currently vigorous community.
You can run all your jobs through a single node using local executor,
or distribute them onto a group of worker nodes through Celery/Dask/Mesos orchestration.</p>
<h3 id="The-Bad"><a href="#The-Bad" class="headerlink" title="The Bad"></a>The Bad</h3><p>Airflow by itself is still not very mature (in fact maybe Oozie is the only “mature” engine here).
The scheduler would need to periodically poll the scheduling plan and send jobs to executors.
This means it along would continuously dump enormous amount of logs out of the box.
As it works by “ticking”, your jobs are not guaranteed to get scheduled in “real-time” if that makes sense
and this would get worse as the number of concurrent jobs increases.
Meanwhile as you have one centralized scheduler, if it goes down or gets stuck, your running jobs won’t be
affected as that the job of executors, but no new jobs will get scheduled. This is especially confusing when
you run this with a HA setup where you have multiple web nodes, a scheduler, a broker
(typically a message queue in Celery case), multiple executors. When scheduler is stuck for whatever reason,
all you see in web UI is all tasks are running, but in fact they are not actually moving forward while executors
are happily reporting they are fine. In other words, the default monitoring is still far from bullet proof.</p>
<p>The web UI is very nice from the first look. However it sometimes is confusing to new users.
What does it mean my DAG runs are “running” but my tasks have no state? The charts are not search friendly either,
let alone some of the features are still far from well documented
(though the document does look nice, I mean, compared to Oozie, which does seem out-dated).</p>
<p>The backfilling design is good in certain cases but very error prone in others.
If you have a flow with cron schedules disabled and re-enabled later, it would try to play catch up,
and if your jobs is not designed to be idempotent, shit would happen for real.</p>
<h2 id="Azkaban"><a href="#Azkaban" class="headerlink" title="Azkaban"></a>Azkaban</h2><h3 id="The-Good-1"><a href="#The-Good-1" class="headerlink" title="The Good"></a>The Good</h3><p>Of all the engines, Azkaban is probably the easiest to get going out of the box.
UI is very intuitive and easy to use. Scheduling and REST APIs works just fine.</p>
<p>Limited HA setup works out of the box.
There’s no need for load balancer because you can only have one web node.
You can configure how it selects executor nodes to push jobs to and it generally seems to scale pretty nicely.
You can easily run tens of thousands of jobs as long as you have enough capacity for the executor nodes.</p>
<h3 id="The-Bad-1"><a href="#The-Bad-1" class="headerlink" title="The Bad"></a>The Bad</h3><p>It is not very feature rich out of the box as a general purpose orchestration engine,
but likely that’s not what’s originally designed for. It’s strength lies in native support for Hadoop/Pig/Hive,
though you can also achieve those using command line. But itself cannot trigger jobs through external resources like
Airflow, nor does it support job waiting pattern. Although you can do busy waiting through java code/scripts, that
leads to bad resource utilization.</p>
<p>The documentation and configuration are generally a bit confusing compared to others. It’s likely that it wasn’t supposed
to be OSed at the beginning. The design is okish but you better have a big data center to run the executors as scheduling 
would get stalled when executors run out of resources without extra monitoring stuff. The code quality overall is a bit towards
the lower end compared to others so it generally only scales well when resource is not a problem.</p>
<p>The setup/design is not cloud friendly. You are pretty much supposed to have stable bare metal rather than dynamically
allocated virtual instances with dynamic IPs. Scheduling would go south if machines vanish.</p>
<p>The monitoring part is sort of acceptable through JMX (does not seem documented). But it generally doesn’t work well if your
machines are heavily loaded, unfortunately, as the endpoints may get stuck.</p>
<h2 id="Conductor"><a href="#Conductor" class="headerlink" title="Conductor"></a>Conductor</h2><h3 id="The-Good-2"><a href="#The-Good-2" class="headerlink" title="The Good"></a>The Good</h3><p>It’s a bit unfair to put Conductor into this competition as it’s real purpose is for microservice orchestration, whatever that means.
It’s HA model involves a quorum of servers sitting behind load balancer putting tasks onto a message queue which the worker nodes would
poll from, which means it’s less likely you’ll run into stalled scheduling.
With the help of parameterized execution through API, it’s actually quite good at scheduling and scaling provided
that you set up your load balancer/service discovery layer properly.</p>
<h3 id="The-Bad-2"><a href="#The-Bad-2" class="headerlink" title="The Bad"></a>The Bad</h3><p>The UI needs a bit more love. There’s currently very limited monitoring there. Although for general purpose scheduling that’s probably
good enough.</p>
<p>It’s pretty bare-bone out of the box. There’s not even native support for running shell scripts, though it’s pretty easy to implement
a task worker through python to do the job with the examples provided.</p>
<h2 id="Oozie"><a href="#Oozie" class="headerlink" title="Oozie"></a>Oozie</h2><h3 id="The-Good-3"><a href="#The-Good-3" class="headerlink" title="The Good"></a>The Good</h3><p>Oozie provides a seemingly reliable HA model through the db setup (seemingly b/c I’ve not dug into it).
It provides native support for Hadoop related jobs as it was sort of built for that eco system.</p>
<h3 id="The-Bad-3"><a href="#The-Bad-3" class="headerlink" title="The Bad"></a>The Bad</h3><p>Not a very good candidate for general purpose flow scheduling as the XML definition is quite verbose
and cumbersome for defining light weight jobs.</p>
<p>It also requires quite a bit of peripheral setup. You need a zookeeper cluster, a db, a load balancer
and each node needs to run a web app container like Tomcat. The initial setup also takes some time which is
not friendly to first time users to pilot stuff.</p>
<h2 id="Step-Functions"><a href="#Step-Functions" class="headerlink" title="Step Functions"></a>Step Functions</h2><h3 id="The-Good-4"><a href="#The-Good-4" class="headerlink" title="The Good"></a>The Good</h3><p>Step Functions is fairly new (launch in Dec 2016). However the future seems promising. With the HA nature of cloud
platform and lambda functions, it almost feels like it can easily scale infinitely (compared to others).</p>
<p>It also offers some useful features for general purpose workflow handling like waiting support and dynamic branching
based on output.</p>
<p>It’s also fairly cheap:</p>
<ul>
<li>4,000 state transitions are free each month</li>
<li>$0.025 per 1,000 state transitions thereafter ($0.000025 per state transition)</li>
</ul>
<p>If you don’t run tens of thousands of jobs, this might be even better than running your own cluster of things.</p>
<h3 id="The-Bad-4"><a href="#The-Bad-4" class="headerlink" title="The Bad"></a>The Bad</h3><p>Can only be used by AWS users. Deal breaker if you are not one of them yet.</p>
<p>Lambda requires extra work for production level iteration/deployment.</p>
<p>There’s no UI (well there is but it’s really just a console).
So if you need any level of monitoring beyond that you need to build it using cloudwatch by yourself.</p>

                    
                        
                    
                    
                        <p>
                            <a href="/2018/04/13/Workflow-Processing-Engine-Overview-2018-Airflow-vs-Azkaban-vs-Conductor-vs-Oozie-vs-Amazon-Step-Functions/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">page 1 of 1</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2018 Shawn Xu. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="https://miro.medium.com/fit/c/90/90/1*7cPXDgvy2_tKMHR4SEd-yQ.jpeg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">Shawn Xu</h4>
        
            <div id="about-card-bio"><p>Full-stack Software Engineer in Bay Area</p>
</div>
        
        
        
    </div>
</div>

        <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-close"></i></span>
            <a href="https://algolia.com" target="_blank" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    autofocus="autofocus"/>
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">no post found</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://xcorpion.tech/2016/08/14/get-started-with-hexo-blogging-system/">
                            <h3 class="media-heading">Get Started with Hexo Blogging System</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Aug 14, 2016
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><h1 id="You-should-read-this-if"><a href="#You-should-read-this-if" class="headerlink" title="You should read this if"></a>You should read this if</h1><ul>
<li>You want to set up a personal blog</li>
<li>You know what <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet" target="_blank" rel="noopener">Markdown</a> is</li>
<li>You don’t want to set up a heavy Wordpress environment</li>
<li>You don’t want to set up any database just for the blog</li>
<li>You either don’t have a VPS or want to host blog content in some easy-to-reach place.</li>
<li>You still want a template/theme system.</li>
</ul>
<h1 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h1><p>Github Pages + Hexo (what this site uses)</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://xcorpion.tech/2016/09/10/It-s-all-about-buffers-zero-copy-mmap-and-Java-NIO/">
                            <h3 class="media-heading">It&#39;s all about buffers: zero-copy, mmap and Java NIO</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Sep 10, 2016
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>There are use cases where data need to be read from source to a sink without modification. In code this might look quite simple: for example in Java, you may read data from one <code>InputStream</code> chunk by chunk into a small buffer (typically 8KB), and feed them into the <code>OutputStream</code>, or even better, you could create a <code>PipedInputStream</code>, which is basically just a util that maintains that buffer for you. However, if low latency is crucial to your software, this might be quite expensive from the OS perspective and I shall explain.</p>
<h2 id="What-happens-under-the-hood"><a href="#What-happens-under-the-hood" class="headerlink" title="What happens under the hood"></a>What happens under the hood</h2><p>Well, here’s what happens when the above code is used:</p>
<img src="/2016/09/10/It-s-all-about-buffers-zero-copy-mmap-and-Java-NIO/non_zero_copy.png">
<ol>
<li>JVM sends read() syscall. </li>
<li>OS context switches to kernel mode and reads data into the input socket buffer.</li>
<li>OS kernel then copies data into user buffer, and context switches back to user mode. read() returns.</li>
<li>JVM processes code logic and sends write() syscall.</li>
<li>OS context switches to kernel mode and copies data from user buffer to output socket buffer.</li>
<li>OS returns to user mode and logic in JVM continues.</li>
</ol></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://xcorpion.tech/2016/09/18/Why-you-should-ditch-browserify-and-commonjs-in-the-http-2-world/">
                            <h3 class="media-heading">Why you should ditch Browserify and CommonJS in the http/2 world</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Sep 18, 2016
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><div class="alert info no-icon"><p>Stop bundling in the http/2 world since it does it for you.</p>
</div>
<!-- toc -->
<h1 id="Modularization-is-a-great-idea"><a href="#Modularization-is-a-great-idea" class="headerlink" title="Modularization is a great idea"></a>Modularization is a great idea</h1><p>Back in the old days where there were no concept regarding frontend package management, we would lay out all the scripts in order in the html file, and hope for the best that they would somehow work together if order were right. This surely doesn’t work well with huge projects, but luckily back then JavaScripts weren’t so shiny anyways - UIs weren’t so cool and logic was much simpler. However, things do evolve. People soon noticed that this approach wouldn’t scale - cooperation across multiple teams becomes super tricky, if not impossible, and it doesn’t play well with DRY either.</p>
<p>Then people came up with a great idea of modularizing JS code (probably back in 2003?) the same way you would do for your beloved Java/C++ code libraries. And then there came the CommonJS definition concept by Kevin Dangoor back in 2009. Many people got to know this idea thanks to Node.js, and it works quite well, especially for server side code. Now you can easily use npm and build both the frontend and backend using the same tool very quickly, thanks to the JS community. Since people have the same interface for code modularization, team cooperation becomes much easier and projects gain benefit from much better encapsulation.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://xcorpion.tech/2016/10/01/You-Don-t-Know-JS-Eval/">
                            <h3 class="media-heading">You Don&#39;t Know JS - Eval</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Oct 1, 2016
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://xcorpion.tech/2016/10/03/You-Don-t-Know-JS-Equal-or-Not-Equal/">
                            <h3 class="media-heading">You Don&#39;t Know JS - Equal or Not Equal</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Oct 3, 2016
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://xcorpion.tech/2018/04/13/Workflow-Processing-Engine-Overview-2018-Airflow-vs-Azkaban-vs-Conductor-vs-Oozie-vs-Amazon-Step-Functions/">
                            <h3 class="media-heading">Workflow Processing Engine Overview 2018: Airflow vs Azkaban vs Conductor vs Oozie vs Amazon Step Functions</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Apr 13, 2018
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://xcorpion.tech/2018/05/13/Building-Linux-Workspace-on-Windows-10-via-WSL/">
                            <h3 class="media-heading">Building Linux Workspace on Windows 10 via WSL</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    May 13, 2018
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="no post found"
                data-message-one="1 post found"
                data-message-other="{n} posts found">
                7 posts found
            </p>
        </div>
    </div>
</div>
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-pjeo3jlpvikjssklbckuk7bcrp7y2hzba0sfrjcijjv5sgmxuprydvrzvvww.min.js"></script>
<!--SCRIPTS END-->



    </body>
</html>
