
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Shawn&#39;s Pitstop">
    <title>Angular 4+ Custom Bootstrapping: Lazy Bind to Designated Container - Shawn&#39;s Pitstop</title>
    <meta name="author" content="Shawn Xu">
    
    
        <link rel="icon" href="https://xunnanxu.github.io/assets/images/favicon.jpg">
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/rss2.xml">
    
    <meta name="description" content="This works for Angular 4-6 so far.   If you have ever used Angular 1.x, you know there’s a manual bootstrapping option which looks like: 1angular.bootstrap(document.querySelector(&apos;#myApp&apos;), [&apos;myModule">
<meta property="og:type" content="blog">
<meta property="og:title" content="Angular 4+ Custom Bootstrapping: Lazy Bind to Designated Container">
<meta property="og:url" content="https://xunnanxu.github.io/2018/05/14/Angular-4-Custom-Bootstrapping-Lazy-Bind-to-Designated-Container/index.html">
<meta property="og:site_name" content="Shawn&#39;s Pitstop">
<meta property="og:description" content="This works for Angular 4-6 so far.   If you have ever used Angular 1.x, you know there’s a manual bootstrapping option which looks like: 1angular.bootstrap(document.querySelector(&apos;#myApp&apos;), [&apos;myModule">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://www.memes.at/faces/are_you_fucking_kidding_me.jpg">
<meta property="og:image" content="http://www.memes.at/faces/desk_flip.jpg">
<meta property="og:updated_time" content="2018-07-26T07:32:16.776Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Angular 4+ Custom Bootstrapping: Lazy Bind to Designated Container">
<meta name="twitter:description" content="This works for Angular 4-6 so far.   If you have ever used Angular 1.x, you know there’s a manual bootstrapping option which looks like: 1angular.bootstrap(document.querySelector(&apos;#myApp&apos;), [&apos;myModule">
<meta name="twitter:image" content="http://www.memes.at/faces/are_you_fucking_kidding_me.jpg">
    
    
        
    
    
        <meta property="og:image" content="https://miro.medium.com/fit/c/90/90/1*7cPXDgvy2_tKMHR4SEd-yQ.jpeg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-tjqiy9dmftx6bosldegn4cseab47cbwepgllthon2qqaa41bsapcml3pboyd.min.css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-83953865-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">Shawn&#39;s Pitstop</a>
    </div>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="https://miro.medium.com/fit/c/90/90/1*7cPXDgvy2_tKMHR4SEd-yQ.jpeg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="https://miro.medium.com/fit/c/90/90/1*7cPXDgvy2_tKMHR4SEd-yQ.jpeg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">Shawn Xu</h4>
                
                    <h5 class="sidebar-profile-bio"><p>Full-stack Software Engineer in Bay Area</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories/"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags/"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives/"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/xunnanxu" target="_blank">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://www.linkedin.com/in/xunnanxu" target="_blank">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/rss2.xml"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title" itemprop="headline">
            Angular 4+ Custom Bootstrapping: Lazy Bind to Designated Container
        </h1>
    
    <div class="post-meta">
    <time itemprop="datePublished" datetime="2018-05-14T23:50:39-07:00">
	
		    May 14, 2018
    	
    </time>
    
</div>

</div>
    
    <div class="post-content markdown" itemprop="articleBody">
        <div class="main-content-wrap">
            <div class="alert info no-icon"><p>This works for Angular 4-6 so far.</p>
</div>
<p><br>
If you have ever used Angular 1.x, you know there’s a manual bootstrapping
option which looks like:
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">angular.bootstrap(<span class="built_in">document</span>.querySelector(<span class="string">'#myApp'</span>), [<span class="string">'myModule'</span>])<span class="string">`</span></span><br></pre></td></tr></table></figure></p>
<p>This used to be pretty handy until Angular 2 comes in and changes the life.
For some reason they decide to hide that option and ask people to just use
<code>bootstrap</code> in <code>@NgModule</code>.</p>
<p>I get that because for general users this is good enough,
especially if you are just building a general SPA.
However if you want to build something advanced like lazy loading,
or conditional rendering, then this seems a bit naive.</p>
<p>This is especially annoying when in React its counterpart is as simple as
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.render(     </span><br><span class="line">  &lt;MyApp /&gt;,</span><br><span class="line">  <span class="built_in">document</span>.querySelector(<span class="string">'#myApp'</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>
<p>This alone won’t drive people away from Angular but it’s just one of the examples
that shows Angular wants to force people into its model rather than thinking about
use cases in the real world.</p>
<p>Alright enough whining and let’s get to coding. After all, Angular seems excellent
especially it covers everything from development, testing, and packaging out of the box.
Let’s leave whining till next time.</p>
<p>I’ll create a simple stackblitz app like this:</p>
<iframe style="border:none" width="100%" height="400px" src="https://stackblitz.com/edit/angular-qrrjaz?embed=1&file=src/app/app.component.ts"></iframe>

<p>It’s pretty simple. The module tells Angular to bootstrap <code>AppComponent</code>,
which looks for an element with tag <code>&lt;my-app&gt;</code>. After that it loads the
<code>HelloComponent</code> which renders the <code>greeting</code> message from input.
The button in <code>AppComponent</code> will switch the message to <code>it works</code> once clicked.</p>
<p>But what if we want to lazy load it into a div <code>#myApp</code> then?</p>
<p>Looking at the document, it is not mentioned. However, if we carefully read it, we’ll
see there’s <a href="https://angular.io/guide/entry-components#a-bootstrapped-entry-component" target="_blank" rel="noopener">something that reads</a>:</p>
<blockquote>
<p>A component can also be bootstrapped imperatively in the module’s ngDoBootstrap() method. The @NgModule.bootstrap property tells the compiler that this is an entry component and it should generate code to bootstrap the application with this component.</p>
</blockquote>
<p>And there’s another chunk on that page that reads:</p>
<blockquote>
<p>Though the @NgModule decorator has an entryComponents array, most of the time you won’t have to explicitly set any entry components because Angular adds components listed in @NgModule.bootstrap and those in route definitions to entry components automatically. Though these two mechanisms account for most entry components, if your app happens to bootstrap or dynamically load a component by type imperatively, you must add it to entryComponents explicitly.</p>
</blockquote>
<p>And we are like:</p>
<img src="http://www.memes.at/faces/are_you_fucking_kidding_me.jpg" alt="Are you fucking kidding me" style="width:200px">
<p>Wait there’s another chunk on the <a href="https://angular.io/guide/bootstrapping" target="_blank" rel="noopener">bootstrapping page</a>:</p>
<blockquote>
<p>The application launches by bootstrapping the root AppModule, which is also referred to as an entryComponent. Among other things, the bootstrapping process creates the component(s) listed in the bootstrap array and inserts each one into the browser DOM.</p>
</blockquote>
<p>Ok I get that. But still, WTF does that mean?</p>
<img src="http://www.memes.at/faces/desk_flip.jpg" alt="Desk flip" style="width:200px">
<p>Never mind. I figured out through reading <del>document</del> source code. After all, some say,
documentation is for the weak.</p>
<h2 id="And-here-are-the-steps-finally"><a href="#And-here-are-the-steps-finally" class="headerlink" title="And here are the steps (finally)"></a>And here are the steps (finally)</h2><p>First of all, replace <code>bootstrap</code> with <code>entryComponents</code> in <code>@NgModule</code>.
This will tell Angular not to preemptively initialize everything.
In addition to that, the <code>entryComponents</code> param will tell angular to prepare
all <code>ComponentFactory</code> instances and load them into app’s <code>ComponentFactoryResolver</code>.
And if you re-read the document you’ll see what it means.</p>
<p>So our example app now looks like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@NgModule(&#123;</span><br><span class="line">  imports:      [ BrowserModule, FormsModule ],</span><br><span class="line">  declarations: [ AppComponent, HelloComponent ],</span><br><span class="line">  entryComponents: [ AppComponent ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Next, override the <code>ngDoBootstrap()</code> with an empty body.
This will prevent default bootstrapping action when <code>bootstrapModule()</code> is called
in <code>main.ts</code> file.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppModule</span> </span>&#123;</span><br><span class="line">  public ngDoBootstrap(appRef: ApplicationRef) &#123;</span><br><span class="line"></span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Alright now we go back to the <code>main.ts</code> file to perform the core magic.</p>
<p>The source code (thanks to TypeScript) tells us that
<code>platformBrowserDynamic().bootstrapModule(AppModule)</code>
returns a <code>NgModuleRef</code>.</p>
<p>In <code>NgModuleRef</code> we can grab the <code>injector</code>. As we all know, angular is all about
dependency injection. So we can call <code>bootstrap</code> here then and in newer version of
Angular, that would take an <code>rootSelectorOrNode</code>.</p>
<p>Great so let’s do:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">platformBrowserDynamic().bootstrapModule(AppModule)</span><br><span class="line">  .then(<span class="function">(<span class="params">moduleRef: NgModuleRef&lt;AppModule&gt;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> app: ApplicationRef = moduleRef.injector.get(ApplicationRef);</span><br><span class="line">    app.bootstrap(AppComponent, <span class="string">'#myApp'</span>);</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<p>After this our app would boot, but nothing happens if you click on “Knock knock”.</p>
<p>WTF?</p>
<p>In Angular 2+, there’s the magic of <code>ngZone</code>. You can read more about it in their
<a href="https://github.com/angular/zone.js/" target="_blank" rel="noopener">zone.js repo</a>. In short, it provides an
“isolated” execution context in which it hijacks the regular DOM methods to provide
feedback loop for Angular to handle events more performantly. So inside Angular zone,
your click is no longer a plain one but enhanced with magic to tell Angular something
has happened.</p>
<p>So how do we get the <code>ngZone</code> then? Remeber we have the omnipotent <code>injector</code> so we
can do</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.then(<span class="function">(<span class="params">moduleRef: NgModuleRef&lt;AppModule&gt;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> app: ApplicationRef = moduleRef.injector.get(ApplicationRef);</span><br><span class="line">  <span class="keyword">const</span> ngZone: NgZone = moduleRef.injector.get(NgZone);</span><br><span class="line">  ngZone.run(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    app.bootstrap(AppComponent, <span class="string">'#myApp'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>At the end, here’s everything in a nutshell:</p>
<iframe style="border:none" width="100%" height="400px" src="https://stackblitz.com/edit/angular-1cnxy4?embed=1&ctl=1&file=src/app/app.module.ts"></iframe>

<p>Enjoy hacking, until they support this with a one-liner.</p>

            
        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2018/05/13/Building-Linux-Workspace-on-Windows-10-via-WSL/" data-tooltip="Building Linux Workspace on Windows 10 via WSL">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://xunnanxu.github.io/2018/05/14/Angular-4-Custom-Bootstrapping-Lazy-Bind-to-Designated-Container/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://xunnanxu.github.io/2018/05/14/Angular-4-Custom-Bootstrapping-Lazy-Bind-to-Designated-Container/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://xunnanxu.github.io/2018/05/14/Angular-4-Custom-Bootstrapping-Lazy-Bind-to-Designated-Container/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2018 Shawn Xu. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2018/05/13/Building-Linux-Workspace-on-Windows-10-via-WSL/" data-tooltip="Building Linux Workspace on Windows 10 via WSL">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://xunnanxu.github.io/2018/05/14/Angular-4-Custom-Bootstrapping-Lazy-Bind-to-Designated-Container/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://xunnanxu.github.io/2018/05/14/Angular-4-Custom-Bootstrapping-Lazy-Bind-to-Designated-Container/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://xunnanxu.github.io/2018/05/14/Angular-4-Custom-Bootstrapping-Lazy-Bind-to-Designated-Container/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="4">
    <ul class="share-options">
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https://xunnanxu.github.io/2018/05/14/Angular-4-Custom-Bootstrapping-Lazy-Bind-to-Designated-Container/">
                <i class="fa fa-google-plus"></i><span>Share on Google Plus</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://xunnanxu.github.io/2018/05/14/Angular-4-Custom-Bootstrapping-Lazy-Bind-to-Designated-Container/">
                <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https://xunnanxu.github.io/2018/05/14/Angular-4-Custom-Bootstrapping-Lazy-Bind-to-Designated-Container/">
                <i class="fa fa-twitter"></i><span>Share on Twitter</span>
            </a>
        </li>
    </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="https://miro.medium.com/fit/c/90/90/1*7cPXDgvy2_tKMHR4SEd-yQ.jpeg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">Shawn Xu</h4>
        
            <div id="about-card-bio"><p>Full-stack Software Engineer in Bay Area</p>
</div>
        
        
        
    </div>
</div>

        <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-close"></i></span>
            <a href="https://algolia.com" target="_blank" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    autofocus="autofocus"/>
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">no post found</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://xunnanxu.github.io/2016/08/14/get-started-with-hexo-blogging-system/">
                            <h3 class="media-heading">Get Started with Hexo Blogging System</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Aug 14, 2016
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><h1 id="You-should-read-this-if"><a href="#You-should-read-this-if" class="headerlink" title="You should read this if"></a>You should read this if</h1><ul>
<li>You want to set up a personal blog</li>
<li>You know what <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet" target="_blank" rel="noopener">Markdown</a> is</li>
<li>You don’t want to set up a heavy Wordpress environment</li>
<li>You don’t want to set up any database just for the blog</li>
<li>You either don’t have a VPS or want to host blog content in some easy-to-reach place.</li>
<li>You still want a template/theme system.</li>
</ul>
<h1 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h1><p>Github Pages + Hexo (what this site uses)</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://xunnanxu.github.io/2016/09/10/It-s-all-about-buffers-zero-copy-mmap-and-Java-NIO/">
                            <h3 class="media-heading">It&#39;s all about buffers: zero-copy, mmap and Java NIO</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Sep 10, 2016
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>There are use cases where data need to be read from source to a sink without modification. In code this might look quite simple: for example in Java, you may read data from one <code>InputStream</code> chunk by chunk into a small buffer (typically 8KB), and feed them into the <code>OutputStream</code>, or even better, you could create a <code>PipedInputStream</code>, which is basically just a util that maintains that buffer for you. However, if low latency is crucial to your software, this might be quite expensive from the OS perspective and I shall explain.</p>
<h2 id="What-happens-under-the-hood"><a href="#What-happens-under-the-hood" class="headerlink" title="What happens under the hood"></a>What happens under the hood</h2><p>Well, here’s what happens when the above code is used:</p>
<img src="/2016/09/10/It-s-all-about-buffers-zero-copy-mmap-and-Java-NIO/non_zero_copy.png">
<ol>
<li>JVM sends read() syscall. </li>
<li>OS context switches to kernel mode and reads data into the input socket buffer.</li>
<li>OS kernel then copies data into user buffer, and context switches back to user mode. read() returns.</li>
<li>JVM processes code logic and sends write() syscall.</li>
<li>OS context switches to kernel mode and copies data from user buffer to output socket buffer.</li>
<li>OS returns to user mode and logic in JVM continues.</li>
</ol></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://xunnanxu.github.io/2016/09/18/Why-you-should-ditch-browserify-and-commonjs-in-the-http-2-world/">
                            <h3 class="media-heading">Why you should ditch Browserify and CommonJS in the http/2 world</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Sep 18, 2016
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><div class="alert info no-icon"><p>Stop bundling in the http/2 world since it does it for you.</p>
</div>
<!-- toc -->
<h1 id="Modularization-is-a-great-idea"><a href="#Modularization-is-a-great-idea" class="headerlink" title="Modularization is a great idea"></a>Modularization is a great idea</h1><p>Back in the old days where there were no concept regarding frontend package management, we would lay out all the scripts in order in the html file, and hope for the best that they would somehow work together if order were right. This surely doesn’t work well with huge projects, but luckily back then JavaScripts weren’t so shiny anyways - UIs weren’t so cool and logic was much simpler. However, things do evolve. People soon noticed that this approach wouldn’t scale - cooperation across multiple teams becomes super tricky, if not impossible, and it doesn’t play well with DRY either.</p>
<p>Then people came up with a great idea of modularizing JS code (probably back in 2003?) the same way you would do for your beloved Java/C++ code libraries. And then there came the CommonJS definition concept by Kevin Dangoor back in 2009. Many people got to know this idea thanks to Node.js, and it works quite well, especially for server side code. Now you can easily use npm and build both the frontend and backend using the same tool very quickly, thanks to the JS community. Since people have the same interface for code modularization, team cooperation becomes much easier and projects gain benefit from much better encapsulation.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://xunnanxu.github.io/2016/10/01/You-Don-t-Know-JS-Eval/">
                            <h3 class="media-heading">You Don&#39;t Know JS - Eval</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Oct 1, 2016
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://xunnanxu.github.io/2016/10/03/You-Don-t-Know-JS-Equal-or-Not-Equal/">
                            <h3 class="media-heading">You Don&#39;t Know JS - Equal or Not Equal</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Oct 3, 2016
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://xunnanxu.github.io/2018/04/13/Workflow-Processing-Engine-Overview-2018-Airflow-vs-Azkaban-vs-Conductor-vs-Oozie-vs-Amazon-Step-Functions/">
                            <h3 class="media-heading">Workflow Processing Engine Overview 2018: Airflow vs Azkaban vs Conductor vs Oozie vs Amazon Step Functions</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Apr 13, 2018
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://xunnanxu.github.io/2018/05/13/Building-Linux-Workspace-on-Windows-10-via-WSL/">
                            <h3 class="media-heading">Building Linux Workspace on Windows 10 via WSL</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    May 13, 2018
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://xunnanxu.github.io/2018/05/14/Angular-4-Custom-Bootstrapping-Lazy-Bind-to-Designated-Container/">
                            <h3 class="media-heading">Angular 4+ Custom Bootstrapping: Lazy Bind to Designated Container</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    May 14, 2018
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="no post found"
                data-message-one="1 post found"
                data-message-other="{n} posts found">
                8 posts found
            </p>
        </div>
    </div>
</div>
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-6cx5wezqwzs2duyk2bxi04wpzkiibvdkdociqczdvf3xn3voskkzdkecawfe.min.js"></script>
<!--SCRIPTS END-->

    
        <script>
             var disqus_config = function () {
                 this.page.url = 'https://xunnanxu.github.io/2018/05/14/Angular-4-Custom-Bootstrapping-Lazy-Bind-to-Designated-Container/';
                 
                    this.page.identifier = '2018/05/14/Angular-4-Custom-Bootstrapping-Lazy-Bind-to-Designated-Container/';
                 
             };
            (function() {
                var d = document, s = d.createElement('script');
                var disqus_shortname = 'xcorpion';
                s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
    



    </body>
</html>
